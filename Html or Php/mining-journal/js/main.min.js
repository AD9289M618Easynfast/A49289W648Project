var pageToLoad=2,postPerPage=8,maxPage=4,setUpMainNavigation=function(){$mainNavLink=$(".main-nav li a"),$mainNavLink.hover(function(){$subClassName="."+$(this).text().toLowerCase()+"-menu",$($subClassName).fadeIn("fast")},function(){$subClassName="."+$(this).text().toLowerCase()+"-menu",$($subClassName).fadeOut("fast")})},showLoginDialog=function(){$(".dialog-login").slideDown(250)},hideLoginDialog=function(){$(".dialog-login").slideToggle(250)},toggleForgotPassword=function(){$object=$("#lostpasswordform"),$object.animate({left:0===parseInt($object.css("left"))?$object.outerWidth():0})},submitAjaxLogin=function(e){e.preventDefault();var a=$(this),t=a.serialize();$.ajax({url:getBasedUrl()+"/user/post?action=login",type:"POST",data:t,success:function(e){var a=/invalidusername/g,t=/notyetactivate/g,o=/invalidpassword/g,i=/iamadministrator/g;a.test(e)?$("#message").html("You have entered invalid username"):t.test(e)?$("#message").html("You have not yet activate this account"):o.test(e)?$("#message").html("You have entered wrong password"):i.test(e)?window.location=getBasedUrl()+"/dashboard":window.location.reload()},error:function(e,a,t){$("#message").html(a+t+e)}})},submitAjaxLostpassword=function(e){e.preventDefault();var a=$(this),t=a.serialize();$.ajax({url:getBasedUrl()+"/user/post?action=login",type:"POST",data:t,success:function(e){var a=/success/g;a.test(e)?$("#lostpasswordMessage").html("Please Check your email for your password"):$("#lostpasswordMessage").html("You have entered an invalid Email")},error:function(){$("#lostpasswordMessage").html("Please Check for email. (TODO)")}})},loadMorePost=function(){$.ajax({url:getBasedUrl()+"/user/post?action=loadmore&pageToLoad="+pageToLoad+"&postPerPage="+postPerPage,type:"GET",success:function(e){(pageToLoad!==maxPage&&""!==e||($("#bt-loadmore").hide(),$("#grid-container").append("NOMORE POST"),""!==e))&&($("#grid-container").waterfall("append",$(e)),pageToLoad++)},error:function(e,a,t){$("#grid-container").append(a+e+t)}})},autoGrid=function(){$("#grid-container").waterfall({itemCls:"item",maxCol:2,checkImagesLoaded:!1,isAnimated:!0,dataType:"html",maxPage:1,path:function(e){return getBasedUrl()+"/user/post/?action=loadmore&pageToLoad="+e+"&postPerPage="+postPerPage}})},setupPlaceholder=function(){$("input, textarea").placeholder()},loadRelatedContentSlider=function(){$(".related-item-list").bxSlider({minSlides:2,maxSlides:4,slideWidth:187.5,infiniteLoop:!1,slideMargin:5})},loadMainSlider=function(){$(".main-slider").bxSlider({infiniteLoop:!0})},loadGallerySlider=function(){$(".gallery-slider").bxSlider({pagerCustom:"#gallery-pager"})},setupGalleryPaging=function(){var e=document.URL.slice(0,-1),a=$("#gallery-pager a").size()-1,t=0,o=null;$("#gallery-pager a").click(function(){t=$(this).attr("data-slide-index"),o=$(this).attr("href"),window.history.replaceState("","",e+o)}),$(".gallery-banner-wrapper .bx-next").click(function(){t!==a?t++:t=0,$currentPageTag=$("#gallery-pager a").eq(t),$("#gallery-pager a").removeClass("active"),$currentPageTag.addClass("active"),o=$currentPageTag.attr("href"),window.history.replaceState("","",e+o)}),$(".gallery-banner-wrapper .bx-prev").click(function(){0!==t?t--:t=a,$currentPageTag=$("#gallery-pager a").eq(t),$("#gallery-pager a").removeClass("active"),$currentPageTag.addClass("active"),o=$currentPageTag.attr("href"),window.history.replaceState("","",e+o)})},loadAllSlider=function(){loadRelatedContentSlider(),loadMainSlider(),loadGallerySlider(),setupGalleryPaging()},triggerPostTab=function(){$(".tab-content > div").fadeOut(100),$firstLink=$(".tab-navigation li a")[0],$firstTab=$(".tab-content > div")[0],$($firstLink).addClass("selected"),$($firstTab).fadeIn(100),$(".tab-navigation li a").click(function(){$(".tab-navigation li a").removeClass("selected"),$(this).addClass("selected"),$tabContentClass=$(this).attr("href").replace("#",".").replace("-tab","-content"),$(".tab-content > div").fadeOut(100),$($tabContentClass).fadeIn(500)})},getBasedUrl=function(){var e=/localhost/g,a=window.location.origin;return e.test(window.location.origin)&&(a="http://localhost/all4women"),a};$(document).ready(function(){setUpMainNavigation(),loadAllSlider(),triggerPostTab(),autoGrid(),setupPlaceholder(),$("#loginform").submit(submitAjaxLogin),$("#bt-login").click(showLoginDialog),$("#bt-login-close").click(hideLoginDialog),$(".bt-lostpassword").click(toggleForgotPassword),$("#lostpasswordform").submit(submitAjaxLostpassword),$("#bt-loadmore").click(loadMorePost)});